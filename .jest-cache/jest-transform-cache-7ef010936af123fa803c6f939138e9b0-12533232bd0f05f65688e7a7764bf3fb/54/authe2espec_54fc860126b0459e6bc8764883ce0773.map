{"file":"D:\\Latihan\\Programming\\Dummy-Project\\url-shortener\\test\\e2e\\auth.e2e.spec.ts","mappings":"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","names":[],"sources":["D:\\Latihan\\Programming\\Dummy-Project\\url-shortener\\test\\e2e\\auth.e2e.spec.ts"],"sourcesContent":["import { ConfigModule, ConfigService } from '@nestjs/config';\r\nimport { Test, TestingModule } from '@nestjs/testing';\r\nimport { INestApplication } from '@nestjs/common';\r\nimport { ValidationPipe } from '@nestjs/common';\r\nimport { TypeOrmModule } from '@nestjs/typeorm';\r\nimport { BullModule } from '@nestjs/bullmq';\r\nimport * as dotenv from 'dotenv';\r\nimport request from 'supertest';\r\nimport * as path from 'path';\r\n\r\n// import modules\r\nimport { RateLimitModule } from '../../src/modules/rate-limit/rate-limit.module';\r\nimport { AnalyticsModule } from '../../src/modules/analytics/analytics.module';\r\nimport { SchedulerModule } from '../../src/modules/scheduler/scheduler.module';\r\nimport { QrcodeModule } from '../../src/modules/qrcode/qrcode.module';\r\nimport { AdminModule } from '../../src/modules/admin/admin.module';\r\nimport { CacheModule } from '../../src/common/cache/cache.module';\r\nimport { AuthModule } from '../../src/modules/auth/auth.module';\r\nimport { UrlModule } from '../../src/modules/url/url.module';\r\n\r\n// import entities\r\nimport { Click } from '../../src/modules/analytics/entities/click.entity';\r\nimport { ApiKey } from '../../src/modules/auth/entities/api-key.entity';\r\nimport { User } from '../../src/modules/auth/entities/user.entity';\r\nimport { Url } from '../../src/modules/url/entities/url.entity';\r\n\r\nimport { RateLimitGuard } from '../../src/modules/rate-limit/guards/rate-limit.guard';\r\nimport { cleanDatabase } from './setup';\r\n\r\ndotenv.config({ path: path.resolve(__dirname, '../../.env.test') });\r\n\r\ndescribe('Authentication Flow (E2E)', () => {\r\n  let app: INestApplication;\r\n\r\n  beforeAll(async () => {\r\n    const moduleFixture: TestingModule = await Test.createTestingModule({\r\n      imports: [\r\n        ConfigModule.forRoot({\r\n          isGlobal: true,\r\n          envFilePath: '.env.test',\r\n          ignoreEnvFile: false,\r\n        }),\r\n\r\n        TypeOrmModule.forRootAsync({\r\n          inject: [ConfigService],\r\n          useFactory: (configService: ConfigService) => ({\r\n            type: 'postgres',\r\n            host: configService.get('DB_HOST', 'localhost'),\r\n            port: configService.get<number>('DB_PORT', 5433),\r\n            username: configService.get('DB_USERNAME', 'test_user'),\r\n            password: configService.get('DB_PASSWORD', 'test_password'),\r\n            database: configService.get('DB_DATABASE', 'urlshortener_test_db'),\r\n            entities: [Url, User, ApiKey, Click],\r\n            synchronize: true,\r\n            dropSchema: true,\r\n            logging: false,\r\n          }),\r\n        }),\r\n\r\n        BullModule.forRootAsync({\r\n          inject: [ConfigService],\r\n          useFactory: (configService: ConfigService) => ({\r\n            connection: {\r\n              host: configService.get('REDIS_HOST', 'localhost'),\r\n              port: configService.get<number>('REDIS_PORT', 6380),\r\n              password: configService.get('REDIS_PASSWORD'),\r\n              maxRetriesPerRequest: null,\r\n              lazyConnect: true,\r\n            },\r\n          }),\r\n        }),\r\n\r\n        //   import all module\r\n        CacheModule,\r\n        UrlModule,\r\n        AnalyticsModule,\r\n        QrcodeModule,\r\n        SchedulerModule,\r\n        RateLimitModule,\r\n        AdminModule,\r\n        AuthModule,\r\n      ],\r\n    })\r\n      .overrideGuard(RateLimitGuard)\r\n      .useValue({ canActivate: () => true })\r\n      .compile();\r\n\r\n    app = moduleFixture.createNestApplication();\r\n\r\n    app.useGlobalPipes(\r\n      new ValidationPipe({\r\n        whitelist: true,\r\n        forbidNonWhitelisted: true,\r\n        transform: true,\r\n        transformOptions: {\r\n          enableImplicitConversion: true,\r\n        },\r\n      }),\r\n    );\r\n\r\n    await app.init();\r\n  });\r\n\r\n  afterAll(async () => {\r\n    await app.close();\r\n  });\r\n\r\n  beforeEach(async () => {\r\n    await cleanDatabase();\r\n  });\r\n\r\n  describe('POST /api/auth/register', () => {\r\n    it('should register a new user successfully', async () => {\r\n      const registerDto = {\r\n        email: 'test@example.com',\r\n        name: 'Test User',\r\n        password: 'Password123!',\r\n      };\r\n\r\n      const response = await request(app.getHttpServer())\r\n        .post('/api/auth/register')\r\n        .send(registerDto)\r\n        .expect(201);\r\n\r\n      expect(response.body).toHaveProperty('user');\r\n      expect(response.body).toHaveProperty('accessToken');\r\n      expect(response.body).toHaveProperty('refreshToken');\r\n      expect(response.body.user.email).toBe('test@example.com');\r\n      expect(response.body.user.name).toBe('Test User');\r\n      expect(response.body.user.role).toBe('user');\r\n      expect(response.body.user).not.toHaveProperty('password');\r\n    });\r\n\r\n    it('should reject registration with duplicate email', async () => {\r\n      const registerDto = {\r\n        email: 'duplicate@example.com',\r\n        name: 'User 1',\r\n        password: 'Password123!',\r\n      };\r\n\r\n      // First registration\r\n      await request(app.getHttpServer())\r\n        .post('/api/auth/register')\r\n        .send(registerDto)\r\n        .expect(201);\r\n\r\n      // Second registration with same email\r\n      const response = await request(app.getHttpServer())\r\n        .post('/api/auth/register')\r\n        .send(registerDto)\r\n        .expect(409);\r\n\r\n      expect(response.body.message).toContain('already registered');\r\n    });\r\n\r\n    it('should reject registration with invalid email', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .post('/api/auth/register')\r\n        .send({\r\n          email: 'invalid-email',\r\n          name: 'Test User',\r\n          password: 'Password123!',\r\n        })\r\n        .expect(400);\r\n\r\n      expect(response.body.message).toContain('Email is invalid');\r\n    });\r\n\r\n    it('should reject registration with weak password', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .post('/api/auth/register')\r\n        .send({\r\n          email: 'test@example.com',\r\n          name: 'Test User',\r\n          password: 'weak',\r\n        })\r\n        .expect(400);\r\n\r\n      expect(response.body.message).toContain(\r\n        'Password minimal has 8 characters',\r\n      );\r\n    });\r\n\r\n    it('should reject registration without uppercase in password', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .post('/api/auth/register')\r\n        .send({\r\n          email: 'test@example.com',\r\n          name: 'Test User',\r\n          password: 'password123!',\r\n        })\r\n        .expect(400);\r\n\r\n      expect(response.body.message).toContain(\r\n        'Password must contain uppercase, lowercase letters, and numbers/symbols',\r\n      );\r\n    });\r\n\r\n    it('should reject registration with missing fields', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .post('/api/auth/register')\r\n        .send({\r\n          email: 'test@example.com',\r\n          // missing name and password\r\n        })\r\n        .expect(400);\r\n\r\n      expect(response.body.message).toBeDefined();\r\n    });\r\n\r\n    it('should reject registration with extra fields', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .post('/api/auth/register')\r\n        .send({\r\n          email: 'test@example.com',\r\n          name: 'Test User',\r\n          password: 'Password123!',\r\n          extraField: 'should be rejected',\r\n        })\r\n        .expect(400);\r\n\r\n      expect(response.body.message).toBeDefined();\r\n    });\r\n  });\r\n\r\n  describe('POST /api/auth/login', () => {\r\n    const userCredentials = {\r\n      email: 'login@example.com',\r\n      name: 'Login User',\r\n      password: 'Password123!',\r\n    };\r\n\r\n    beforeEach(async () => {\r\n      // Register user before each login test\r\n      await request(app.getHttpServer())\r\n        .post('/api/auth/register')\r\n        .send(userCredentials);\r\n    });\r\n\r\n    it('should login successfully with correct credentials', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .post('/api/auth/login')\r\n        .send({\r\n          email: userCredentials.email,\r\n          password: userCredentials.password,\r\n        })\r\n        .expect(200);\r\n\r\n      expect(response.body).toHaveProperty('user');\r\n      expect(response.body).toHaveProperty('accessToken');\r\n      expect(response.body).toHaveProperty('refreshToken');\r\n      expect(response.body.user.email).toBe(userCredentials.email);\r\n    });\r\n\r\n    it('should reject login with invalid email', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .post('/api/auth/login')\r\n        .send({\r\n          email: 'wrong@example.com',\r\n          password: userCredentials.password,\r\n        })\r\n        .expect(401);\r\n\r\n      expect(response.body.message).toContain('Email or password is wrong');\r\n    });\r\n\r\n    it('should reject login with invalid password', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .post('/api/auth/login')\r\n        .send({\r\n          email: userCredentials.email,\r\n          password: 'WrongPassword123!',\r\n        })\r\n        .expect(401);\r\n\r\n      expect(response.body.message).toContain('Email or password is wrong');\r\n    });\r\n\r\n    it('should reject login with missing fields', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .post('/api/auth/login')\r\n        .send({\r\n          email: userCredentials.email,\r\n          // missing password\r\n        })\r\n        .expect(400);\r\n\r\n      expect(response.body.message).toBeDefined();\r\n    });\r\n  });\r\n\r\n  describe('POST /api/auth/refresh', () => {\r\n    let refreshToken: string;\r\n\r\n    beforeEach(async () => {\r\n      const registerResponse = await request(app.getHttpServer())\r\n        .post('/api/auth/register')\r\n        .send({\r\n          email: 'refresh@example.com',\r\n          name: 'Refresh User',\r\n          password: 'Password123!',\r\n        });\r\n\r\n      refreshToken = registerResponse.body.refreshToken;\r\n    });\r\n\r\n    it('should refresh access token with valid refresh token', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .post('/api/auth/refresh')\r\n        .send({ refreshToken })\r\n        .expect(200);\r\n\r\n      expect(response.body).toHaveProperty('accessToken');\r\n      expect(response.body).toHaveProperty('refreshToken');\r\n      expect(response.body.accessToken).toBeDefined();\r\n    });\r\n\r\n    it('should reject invalid refresh token', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .post('/api/auth/refresh')\r\n        .send({ refreshToken: 'invalid-token' })\r\n        .expect(401);\r\n\r\n      expect(response.body.message).toContain('Invalid refresh token');\r\n    });\r\n\r\n    it('should reject expired refresh token', async () => {\r\n      // This test would require mocking time or using a token with very short expiry\r\n      // For now, we test with completely invalid token\r\n      const expiredToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.expired';\r\n\r\n      const response = await request(app.getHttpServer())\r\n        .post('/api/auth/refresh')\r\n        .send({ refreshToken: expiredToken })\r\n        .expect(401);\r\n\r\n      expect(response.body.message).toContain('Invalid refresh token');\r\n    });\r\n  });\r\n\r\n  describe('GET /api/auth/me', () => {\r\n    let accessToken: string;\r\n    let userId: string;\r\n\r\n    beforeEach(async () => {\r\n      const registerResponse = await request(app.getHttpServer())\r\n        .post('/api/auth/register')\r\n        .send({\r\n          email: 'me@example.com',\r\n          name: 'Me User',\r\n          password: 'Password123!',\r\n        });\r\n\r\n      accessToken = registerResponse.body.accessToken;\r\n      userId = registerResponse.body.user.id;\r\n    });\r\n\r\n    it('should get current user profiles with valid token', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .get('/api/auth/me')\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      expect(response.body).toHaveProperty('id', userId);\r\n      expect(response.body).toHaveProperty('email', 'me@example.com');\r\n      expect(response.body).toHaveProperty('name', 'Me User');\r\n      expect(response.body).not.toHaveProperty('password');\r\n    });\r\n\r\n    it('should reject request without token', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .get('/api/auth/me')\r\n        .expect(401);\r\n\r\n      expect(response.body.message).toBeDefined();\r\n    });\r\n\r\n    it('should reject request with invalid token', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .get('/api/auth/me')\r\n        .set('Authorization', 'Bearer invalid-token')\r\n        .expect(401);\r\n\r\n      expect(response.body.message).toBeDefined();\r\n    });\r\n\r\n    it('should reject request with malformed authorization header', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .get('/api/auth/me')\r\n        .set('Authorization', 'InvalidFormat token')\r\n        .expect(401);\r\n\r\n      expect(response.body.message).toBeDefined();\r\n    });\r\n  });\r\n\r\n  describe('POST /api/auth/logout', () => {\r\n    let accessToken: string;\r\n    let refreshToken: string;\r\n\r\n    beforeEach(async () => {\r\n      const registerResponse = await request(app.getHttpServer())\r\n        .post('/api/auth/register')\r\n        .send({\r\n          email: 'logout@example.com',\r\n          name: 'Logout User',\r\n          password: 'Password123!',\r\n        });\r\n\r\n      accessToken = registerResponse.body.accessToken;\r\n      refreshToken = registerResponse.body.refreshToken;\r\n    });\r\n\r\n    it('should logout successfully', async () => {\r\n      await request(app.getHttpServer())\r\n        .post('/api/auth/logout')\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(204);\r\n\r\n      // Try to use refresh token after logout (should fail)\r\n      const response = await request(app.getHttpServer())\r\n        .post('/api/auth/refresh')\r\n        .send({ refreshToken })\r\n        .expect(401);\r\n\r\n      expect(response.body.message).toContain('Invalid refresh token');\r\n    });\r\n\r\n    it('should reject logout without token', async () => {\r\n      await request(app.getHttpServer()).post('/api/auth/logout').expect(401);\r\n    });\r\n  });\r\n\r\n  describe('Complete Authentication Flow', () => {\r\n    it('should handle register → login → get profile → logout flow', async () => {\r\n      // 1. Register\r\n      const registerResponse = await request(app.getHttpServer())\r\n        .post('/api/auth/register')\r\n        .send({\r\n          email: 'complete@example.com',\r\n          name: 'Complete User',\r\n          password: 'Password123!',\r\n        })\r\n        .expect(201);\r\n\r\n      expect(registerResponse.body.accessToken).toBeDefined();\r\n      const userId = registerResponse.body.user.id;\r\n\r\n      // 2. Logout (clear first session)\r\n      await request(app.getHttpServer())\r\n        .post('/api/auth/logout')\r\n        .set('Authorization', `Bearer ${registerResponse.body.accessToken}`)\r\n        .expect(204);\r\n\r\n      // 3. Login\r\n      const loginResponse = await request(app.getHttpServer())\r\n        .post('/api/auth/login')\r\n        .send({\r\n          email: 'complete@example.com',\r\n          password: 'Password123!',\r\n        })\r\n        .expect(200);\r\n\r\n      const accessToken = loginResponse.body.accessToken;\r\n\r\n      // 4. Get Profile\r\n      const profileResponse = await request(app.getHttpServer())\r\n        .get('/api/auth/me')\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      expect(profileResponse.body.id).toBe(userId);\r\n\r\n      // 5. Refresh Token\r\n      const refreshResponse = await request(app.getHttpServer())\r\n        .post('/api/auth/refresh')\r\n        .send({ refreshToken: loginResponse.body.refreshToken })\r\n        .expect(200);\r\n\r\n      expect(refreshResponse.body.accessToken).toBeDefined();\r\n\r\n      // 6. Final Logout\r\n      await request(app.getHttpServer())\r\n        .post('/api/auth/logout')\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(204);\r\n\r\n      // 7. Verify cannot access still valid (JWT stateless)\r\n      await request(app.getHttpServer())\r\n        .get('/api/auth/me')\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      // 8. Verify cannot access refreshToken after logout\r\n      await request(app.getHttpServer())\r\n        .post('/api/auth/refresh')\r\n        .send({ refreshToken: loginResponse.body.refreshToken })\r\n        .expect(401);\r\n    });\r\n  });\r\n});\r\n"],"version":3}