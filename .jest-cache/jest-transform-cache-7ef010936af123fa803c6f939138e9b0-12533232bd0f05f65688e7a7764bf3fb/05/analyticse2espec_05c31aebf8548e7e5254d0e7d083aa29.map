{"file":"D:\\Latihan\\Programming\\Dummy-Project\\url-shortener\\test\\e2e\\analytics.e2e.spec.ts","mappings":"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","names":[],"sources":["D:\\Latihan\\Programming\\Dummy-Project\\url-shortener\\test\\e2e\\analytics.e2e.spec.ts"],"sourcesContent":["import { ConfigModule, ConfigService } from '@nestjs/config';\r\nimport { Test, TestingModule } from '@nestjs/testing';\r\nimport { INestApplication } from '@nestjs/common';\r\nimport { ValidationPipe } from '@nestjs/common';\r\nimport { TypeOrmModule } from '@nestjs/typeorm';\r\nimport { BullModule } from '@nestjs/bullmq';\r\nimport * as dotenv from 'dotenv';\r\nimport request from 'supertest';\r\nimport * as path from 'path';\r\n\r\n// import modules\r\nimport { RateLimitModule } from '../../src/modules/rate-limit/rate-limit.module';\r\nimport { AnalyticsModule } from '../../src/modules/analytics/analytics.module';\r\nimport { SchedulerModule } from '../../src/modules/scheduler/scheduler.module';\r\nimport { QrcodeModule } from '../../src/modules/qrcode/qrcode.module';\r\nimport { AdminModule } from '../../src/modules/admin/admin.module';\r\nimport { CacheModule } from '../../src/common/cache/cache.module';\r\nimport { AuthModule } from '../../src/modules/auth/auth.module';\r\nimport { UrlModule } from '../../src/modules/url/url.module';\r\n\r\n// import entities\r\nimport { Click } from '../../src/modules/analytics/entities/click.entity';\r\nimport { ApiKey } from '../../src/modules/auth/entities/api-key.entity';\r\nimport { User } from '../../src/modules/auth/entities/user.entity';\r\nimport { Url } from '../../src/modules/url/entities/url.entity';\r\n\r\nimport { RateLimitGuard } from '../../src/modules/rate-limit/guards/rate-limit.guard';\r\nimport { cleanDatabase } from './setup';\r\n\r\ndotenv.config({ path: path.resolve(__dirname, '../../.env.test') });\r\n\r\ndescribe('Analytics (E2E)', () => {\r\n  let app: INestApplication;\r\n  let accessToken: string;\r\n  let shortCode: string;\r\n  let urlId: string;\r\n\r\n  beforeAll(async () => {\r\n    const moduleFixture: TestingModule = await Test.createTestingModule({\r\n      imports: [\r\n        ConfigModule.forRoot({\r\n          isGlobal: true,\r\n          envFilePath: '.env.test',\r\n          ignoreEnvFile: false,\r\n        }),\r\n\r\n        TypeOrmModule.forRootAsync({\r\n          inject: [ConfigService],\r\n          useFactory: (configService: ConfigService) => ({\r\n            type: 'postgres',\r\n            host: configService.get('DB_HOST', 'localhost'),\r\n            port: configService.get<number>('DB_PORT', 5433),\r\n            username: configService.get('DB_USERNAME', 'test_user'),\r\n            password: configService.get('DB_PASSWORD', 'test_password'),\r\n            database: configService.get('DB_DATABASE', 'urlshortener_test_db'),\r\n            entities: [Url, User, ApiKey, Click],\r\n            synchronize: true,\r\n            dropSchema: true,\r\n            logging: false,\r\n          }),\r\n        }),\r\n\r\n        BullModule.forRootAsync({\r\n          inject: [ConfigService],\r\n          useFactory: (configService: ConfigService) => ({\r\n            connection: {\r\n              host: configService.get('REDIS_HOST', 'localhost'),\r\n              port: configService.get<number>('REDIS_PORT', 6380),\r\n              password: configService.get('REDIS_PASSWORD'),\r\n              maxRetriesPerRequest: null,\r\n              lazyConnect: true,\r\n            },\r\n          }),\r\n        }),\r\n\r\n        //   import all module\r\n        CacheModule,\r\n        UrlModule,\r\n        AnalyticsModule,\r\n        QrcodeModule,\r\n        SchedulerModule,\r\n        RateLimitModule,\r\n        AdminModule,\r\n        AuthModule,\r\n      ],\r\n    })\r\n      .overrideGuard(RateLimitGuard)\r\n      .useValue({ canActivate: () => true })\r\n      .compile();\r\n\r\n    app = moduleFixture.createNestApplication();\r\n\r\n    app.useGlobalPipes(\r\n      new ValidationPipe({\r\n        whitelist: true,\r\n        forbidNonWhitelisted: true,\r\n        transform: true,\r\n        transformOptions: {\r\n          enableImplicitConversion: true,\r\n        },\r\n      }),\r\n    );\r\n\r\n    await app.init();\r\n  });\r\n\r\n  afterAll(async () => {\r\n    await app.close();\r\n  });\r\n\r\n  beforeEach(async () => {\r\n    await cleanDatabase();\r\n\r\n    // register user and create URL\r\n    const registerResponse = await request(app.getHttpServer())\r\n      .post('/api/auth/register')\r\n      .send({\r\n        email: 'analytics@example.com',\r\n        name: 'Analytics User',\r\n        password: 'Password123!',\r\n      });\r\n\r\n    accessToken = registerResponse.body.accessToken;\r\n\r\n    const createResponse = await request(app.getHttpServer())\r\n      .post('/api/urls')\r\n      .set('Authorization', `Bearer ${accessToken}`)\r\n      .send({\r\n        originalUrl: 'https://example.com',\r\n        title: 'Analytics Test URL',\r\n      });\r\n\r\n    shortCode = createResponse.body.shortCode;\r\n    urlId = createResponse.body.id;\r\n  });\r\n\r\n  describe('Click Tracking', () => {\r\n    it('should trakc clicks asynchronously', async () => {\r\n      // make redirect request\r\n      await request(app.getHttpServer())\r\n        .get(`/${shortCode}`)\r\n        .set(\r\n          'User-Agent',\r\n          'Mozilla/5.0 (iPhone; CPU iPhone OS 14_0) AppleWebKit/605.1.15',\r\n        )\r\n        .set('Referer', 'https://google.com')\r\n        .expect(302);\r\n\r\n      // wait for async processing\r\n      await new Promise((resolve) => setTimeout(resolve, 2000));\r\n\r\n      // verify analytics recorded\r\n      const analyticsResponse = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/overview`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      expect(analyticsResponse.body.totalClicks).toBeGreaterThan(0);\r\n    });\r\n\r\n    it('should track multiple clicks from different sources', async () => {\r\n      // Click 1: iPhone from Google\r\n      await request(app.getHttpServer())\r\n        .get(`/${shortCode}`)\r\n        .set('User-Agent', 'Mozilla/5.0 (iPhone; CPU iPhone OS 14_0)')\r\n        .set('Referer', 'https://google.com')\r\n        .expect(302);\r\n\r\n      // Click 2: Desktop from Facebook\r\n      await request(app.getHttpServer())\r\n        .get(`/${shortCode}`)\r\n        .set('User-Agent', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64)')\r\n        .set('Referer', 'https://facebook.com')\r\n        .expect(302);\r\n\r\n      // Click 3: Android from Twitter\r\n      await request(app.getHttpServer())\r\n        .get(`/${shortCode}`)\r\n        .set('User-Agent', 'Mozilla/5.0 (Linux; Android 10)')\r\n        .set('Referer', 'https://twitter.com')\r\n        .expect(302);\r\n\r\n      // wait for processing\r\n      await new Promise((resolve) => setTimeout(resolve, 3000));\r\n\r\n      // check overview\r\n      const overviewResponse = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/overview`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      expect(overviewResponse.body.totalClicks).toBe(3);\r\n    });\r\n  });\r\n\r\n  describe('GET /api/analytics/:shortCode/overview', () => {\r\n    beforeEach(async () => {\r\n      // generate some clicks\r\n      for (let i = 0; i < 5; i++) {\r\n        await request(app.getHttpServer())\r\n          .get(`/${shortCode}`)\r\n          .set('User-Agent', 'Mozilla/5.0 (iPhone; CPU iPhone OS 14_0)')\r\n          .expect(302);\r\n      }\r\n\r\n      //   wait for processing\r\n      await new Promise((resolve) => setTimeout(resolve, 3000));\r\n    });\r\n\r\n    it('should return analytics overview', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/overview`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      expect(response.body).toHaveProperty('totalClicks');\r\n      expect(response.body).toHaveProperty('uniqueVisitors');\r\n      expect(response.body).toHaveProperty('averageClicksPerDay');\r\n      expect(response.body).toHaveProperty('createdAt');\r\n      expect(response.body.totalClicks).toBeGreaterThan(0);\r\n    });\r\n\r\n    it('should return 404 for non-existent short code', async () => {\r\n      await request(app.getHttpServer())\r\n        .get('/api/analytics/nonexistent/overview')\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(404);\r\n    });\r\n\r\n    it('should reject request without authentication', async () => {\r\n      await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/overview`)\r\n        .expect(401);\r\n    });\r\n  });\r\n\r\n  describe('GET /api/analytics/:shortCode/timeline', () => {\r\n    beforeEach(async () => {\r\n      // generate clicks over time\r\n      for (let i = 0; i < 3; i++) {\r\n        await request(app.getHttpServer()).get(`/${shortCode}`).expect(302);\r\n      }\r\n\r\n      await new Promise((resolve) => setTimeout(resolve, 2000));\r\n    });\r\n\r\n    it('should return timeline data with default parameters', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/timeline`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      expect(response.body).toHaveProperty('data');\r\n      expect(response.body).toHaveProperty('interval', 'day');\r\n      expect(response.body).toHaveProperty('totalClicks');\r\n      expect(response.body.data).toBeInstanceOf(Array);\r\n    });\r\n\r\n    it('should return timeline with custom interval', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/timeline?interval=hour&days=7`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      expect(response.body.interval).toBe('hour');\r\n    });\r\n\r\n    it('should return timeline for week interval', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/timeline?interval=week&days=30`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      expect(response.body.interval).toBe('week');\r\n    });\r\n\r\n    it('should validate days parameter', async () => {\r\n      // test with invalid days\r\n      const response = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/timeline?days=999`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      // should cap at maximum (e.g., 365 days)\r\n      expect(response.body).toBeDefined();\r\n    });\r\n  });\r\n\r\n  describe('GET /api/analytics/:shortCode/locations', () => {\r\n    beforeEach(async () => {\r\n      // generate clicks from different IPs\r\n      await request(app.getHttpServer())\r\n        .get(`/${shortCode}`)\r\n        .set('X-Forwarded-For', '8.8.8.8') // US IP\r\n        .expect(302);\r\n\r\n      await request(app.getHttpServer())\r\n        .get(`/${shortCode}`)\r\n        .set('X-Forwarded-For', '202.43.173.1') // Indonesia IP\r\n        .expect(302);\r\n\r\n      await new Promise((resolve) => setTimeout(resolve, 2000));\r\n    });\r\n\r\n    it('should return location statistics', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/locations`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      expect(response.body).toHaveProperty('countries');\r\n      expect(response.body).toHaveProperty('cities');\r\n      expect(response.body).toHaveProperty('totalClicks');\r\n      expect(response.body.countries).toBeInstanceOf(Array);\r\n    });\r\n\r\n    it('should include country codes and percentages', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/locations`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      if (response.body.countries.length > 0) {\r\n        const country = response.body.countries[0];\r\n        expect(country).toHaveProperty('countryCode');\r\n        expect(country).toHaveProperty('clicks');\r\n        expect(country).toHaveProperty('percentage');\r\n      }\r\n    });\r\n  });\r\n\r\n  describe('GET /api/analytics/:shortCode/devices', () => {\r\n    beforeEach(async () => {\r\n      // mobile click\r\n      await request(app.getHttpServer())\r\n        .get(`/${shortCode}`)\r\n        .set('User-Agent', 'Mozilla/5.0 (iPhone; CPU iPhone OS 14_0)')\r\n        .expect(302);\r\n\r\n      // desktop click\r\n      await request(app.getHttpServer())\r\n        .get(`/${shortCode}`)\r\n        .set(\r\n          'User-Agent',\r\n          'Mozilla/5.0 (Windows NT 10.0; Win64; x64) Chrome/120.0',\r\n        )\r\n        .expect(302);\r\n\r\n      // tablet click\r\n      await request(app.getHttpServer())\r\n        .get(`/${shortCode}`)\r\n        .set('User-Agent', 'Mozilla/5.0 (iPad; CPU OS 14_0)')\r\n        .expect(302);\r\n\r\n      await new Promise((resolve) => setTimeout(resolve, 2000));\r\n    });\r\n\r\n    it('should return device statistics', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/devices`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      expect(response.body).toHaveProperty('byType');\r\n      expect(response.body).toHaveProperty('byBrowser');\r\n      expect(response.body).toHaveProperty('byOS');\r\n      expect(response.body).toHaveProperty('totalClicks');\r\n    });\r\n\r\n    it('should include device type breakdown', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/devices`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      expect(response.body.byType).toBeInstanceOf(Array);\r\n\r\n      if (response.body.byType.length > 0) {\r\n        const deviceType = response.body.byType[0];\r\n        expect(deviceType).toHaveProperty('deviceType');\r\n        expect(deviceType).toHaveProperty('clicks');\r\n        expect(deviceType).toHaveProperty('percentage');\r\n      }\r\n    });\r\n\r\n    it('should include browser breakdown', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/devices`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      expect(response.body.byBrowser).toBeInstanceOf(Array);\r\n    });\r\n\r\n    it('should include OS breakdown', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/devices`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      expect(response.body.byOS).toBeInstanceOf(Array);\r\n    });\r\n  });\r\n\r\n  describe('GET /api/analytics/:shortCode/referrers', () => {\r\n    beforeEach(async () => {\r\n      // click from Google\r\n      await request(app.getHttpServer())\r\n        .get(`/${shortCode}`)\r\n        .set('Referer', 'https://google.com/search?q=test')\r\n        .expect(302);\r\n\r\n      // click from Facebook\r\n      await request(app.getHttpServer())\r\n        .get(`/${shortCode}`)\r\n        .set('Referer', 'https://facebook.com')\r\n        .expect(302);\r\n\r\n      // direct click (no referer)\r\n      await request(app.getHttpServer()).get(`/${shortCode}`).expect(302);\r\n\r\n      await new Promise((resolve) => setTimeout(resolve, 2000));\r\n    });\r\n\r\n    it('should return referrer statistics', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/referrers`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      expect(response.body).toBeInstanceOf(Array);\r\n    });\r\n\r\n    it('should include clicks counts for each referrer', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/referrers`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      if (response.body.length > 0) {\r\n        const referrer = response.body[0];\r\n        expect(referrer).toHaveProperty('referer');\r\n        expect(referrer).toHaveProperty('clicks');\r\n        expect(typeof referrer.clicks).toBe('number');\r\n      }\r\n    });\r\n  });\r\n\r\n  describe('GET /api/analytics/:shortCode/heatmap', () => {\r\n    beforeEach(async () => {\r\n      // generate clicks\r\n      for (let i = 0; i < 3; i++) {\r\n        await request(app.getHttpServer())\r\n          .get(`/${shortCode}`)\r\n          .set('X-Forwarded-For', '8.8.8.8')\r\n          .expect(302);\r\n      }\r\n\r\n      await new Promise((resolve) => setTimeout(resolve, 2000));\r\n    });\r\n\r\n    it('should return heatmap data', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/heatmap`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      expect(response.body).toBeInstanceOf(Array);\r\n    });\r\n\r\n    it('should return heatmap with custom days parameter', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/heatmap?days=14`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      expect(response.body).toBeInstanceOf(Array);\r\n    });\r\n\r\n    it('should include hour, day, country, and clicks', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/heatmap`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      if (response.body.length > 0) {\r\n        const dataPoint = response.body[0];\r\n        expect(dataPoint).toHaveProperty('hour');\r\n        expect(dataPoint).toHaveProperty('day');\r\n        expect(dataPoint).toHaveProperty('country');\r\n        expect(dataPoint).toHaveProperty('clicks');\r\n      }\r\n    });\r\n  });\r\n\r\n  describe('GET /api/analytics/:shortCode/export', () => {\r\n    beforeEach(async () => {\r\n      // generate some clicks\r\n      await request(app.getHttpServer())\r\n        .get(`/${shortCode}`)\r\n        .set('User-Agent', 'Mozilla/5.0 (iPhone)')\r\n        .set('Referer', 'https://google.com')\r\n        .set('X-Forwarded-For', '8.8.8.8')\r\n        .expect(302);\r\n\r\n      await new Promise((resolve) => setTimeout(resolve, 2000));\r\n    });\r\n\r\n    it('should export analytics as CSV', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/export`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      expect(response.headers['content-type']).toContain('text/csv');\r\n      expect(response.headers['content-disposition']).toContain('attachment');\r\n      expect(response.text).toContain('Timestamp');\r\n      expect(response.text).toContain('IP Address');\r\n      expect(response.text).toContain('Country');\r\n    });\r\n\r\n    it('should include actual click data in CSV', async () => {\r\n      const response = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/export`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      const lines = response.text.split('\\n');\r\n      expect(lines.length).toBeGreaterThan(1);\r\n    });\r\n  });\r\n\r\n  describe('Analytics Caching', () => {\r\n    beforeEach(async () => {\r\n      // generate clicks\r\n      for (let i = 0; i < 5; i++) {\r\n        await request(app.getHttpServer()).get(`/${shortCode}`).expect(302);\r\n      }\r\n\r\n      await new Promise((resolve) => setTimeout(resolve, 2000));\r\n    });\r\n\r\n    it('should cache analytics overview results', async () => {\r\n      // first request - cache miss\r\n      const response1 = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/overview`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      const firstRequestTime = Date.now();\r\n\r\n      // second request - should be faster (cache hit)\r\n      const response2 = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/overview`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      const secondRequestTime = Date.now();\r\n\r\n      // verify same data returned\r\n      expect(response1.body.totalClicks).toBe(response2.body.totalClicks);\r\n\r\n      expect(response2.status).toBe(200);\r\n    });\r\n\r\n    it('should invalidate cache after new clicks', async () => {\r\n      // get initial analytics\r\n      const response1 = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/overview`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      const initialClicks = response1.body.totalClicks;\r\n\r\n      // generate new click\r\n      await request(app.getHttpServer()).get(`/${shortCode}`).expect(302);\r\n\r\n      // wait for processing and cache invalidation\r\n      await new Promise((resolve) => setTimeout(resolve, 3000));\r\n\r\n      // get analytics again\r\n      const response2 = await request(app.getHttpServer())\r\n        .get(`/api/analytics/${shortCode}/overview`)\r\n        .set('Authorization', `Bearer ${accessToken}`)\r\n        .expect(200);\r\n\r\n      // should reflect new click\r\n      expect(response2.body.totalClicks).toBeGreaterThanOrEqual(initialClicks);\r\n    });\r\n  });\r\n});\r\n"],"version":3}