{"version":3,"names":["cov_s8xd5v3ek","actualCoverage","common_1","s","require","CacheMetricsService","CacheMetricsService_1","logger","Logger","name","hits","misses","lastReset","Date","now","recordHit","f","recordMiss","getHitRate","total","b","getStats","hitRate","Math","round","uptime","reset","log","logStats","stats","exports","__decorate","Injectable"],"sources":["D:\\Latihan\\Programming\\Dummy-Project\\url-shortener\\src\\common\\cache\\cache-metrics.service.ts"],"sourcesContent":["import { Injectable, Logger } from '@nestjs/common';\r\n\r\n/* \r\nCache Metrics - Monitor cache hit/miss rate\r\n*/\r\n@Injectable()\r\nexport class CacheMetricsService {\r\n  private readonly logger = new Logger(CacheMetricsService.name);\r\n  private hits = 0;\r\n  private misses = 0;\r\n  private lastReset = Date.now();\r\n\r\n  recordHit(): void {\r\n    this.hits++;\r\n  }\r\n\r\n  recordMiss(): void {\r\n    this.misses++;\r\n  }\r\n\r\n  getHitRate(): number {\r\n    const total = this.hits + this.misses;\r\n    return total === 0 ? 0 : (this.hits / total) * 100;\r\n  }\r\n\r\n  getStats(): {\r\n    hits: number;\r\n    misses: number;\r\n    hitRate: number;\r\n    uptime: number;\r\n  } {\r\n    return {\r\n      hits: this.hits,\r\n      misses: this.misses,\r\n      hitRate: Math.round(this.getHitRate() * 100) / 100,\r\n      uptime: Date.now() - this.lastReset,\r\n    };\r\n  }\r\n\r\n  reset(): void {\r\n    this.hits = 0;\r\n    this.misses = 0;\r\n    this.lastReset = Date.now();\r\n    this.logger.log('Cache metrics reset');\r\n  }\r\n\r\n  logStats(): void {\r\n    const stats = this.getStats();\r\n    this.logger.log(\r\n      `Cache Stats - Hits: ${stats.hits}, Misses: ${stats.misses}, Hit Rate: ${stats.hitRate}%`,\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}