{"file":"D:\\Latihan\\Programming\\Dummy-Project\\url-shortener\\src\\modules\\url\\entities\\url.entity.ts","mappings":";;;;;;;;;;;;;AAAA,qCAA2D;AAC3D,sEAAkE;AAClE,wEAA8D;AAC9D,mCAAgC;AAEhC,IAAA,eAAM,GAAE,CAAC;AAET,yCAAyC;AAKlC,IAAM,GAAG,GAAT,MAAM,GAAI,SAAQ,wBAAU;IAEjC,WAAW,CAAS;IAGpB,SAAS,CAAS;IAGlB,WAAW,CAAgB;IAG3B,KAAK,CAAgB;IAGrB,MAAM,CAAgB;IAGtB,UAAU,CAAS;IAGnB,SAAS,CAAc;IAGvB,QAAQ,CAAU;IAGlB,QAAQ,CAAgB;IAGxB,SAAS,CAAgB;IAEzB,6BAA6B;IAI7B,MAAM,CAAU;IAEhB,IAAI,QAAQ;QACV,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC,QAAQ,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;IACrD,CAAC;CACF,CAAA;AAxCY,kBAAG;AAEd;IADC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;;wCACL;AAGpB;IADC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;;sCACpC;AAGlB;IADC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;wCAC7B;AAG3B;IADC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;kCACpC;AAGrB;IADC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;mCACnC;AAGtB;IADC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;;uCACjB;AAGnB;IADC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,0BAA0B,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;sCACtC;AAGvB;IADC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;;qCACzB;AAGlB;IADC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;qCAChC;AAGxB;IADC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;;sCACX;AAMzB;IAHC,IAAA,mBAAS,EAAC,GAAG,EAAE,CAAC,oBAAK,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE;QAC5C,OAAO,EAAE,KAAK;KACf,CAAC;;mCACc;cAnCL,GAAG;IAJf,IAAA,gBAAM,EAAC,MAAM,CAAC;IACd,IAAA,eAAK,EAAC,CAAC,WAAW,CAAC,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;IACtC,IAAA,eAAK,EAAC,CAAC,QAAQ,CAAC,CAAC;IACjB,IAAA,eAAK,EAAC,CAAC,WAAW,CAAC,CAAC;GACR,GAAG,CAwCf","names":[],"sources":["D:\\Latihan\\Programming\\Dummy-Project\\url-shortener\\src\\modules\\url\\entities\\url.entity.ts"],"sourcesContent":["import { Entity, Column, Index, OneToMany } from 'typeorm';\r\nimport { BaseEntity } from '../../../common/entities/base.entity';\r\nimport { Click } from '../../analytics/entities/click.entity';\r\nimport { config } from 'dotenv';\r\n\r\nconfig();\r\n\r\n// URL Entity - Main table shortened URLs\r\n@Entity('urls')\r\n@Index(['shortCode'], { unique: true })\r\n@Index(['userId'])\r\n@Index(['expiresAt'])\r\nexport class Url extends BaseEntity {\r\n  @Column({ type: 'text' })\r\n  originalUrl: string;\r\n\r\n  @Column({ type: 'varchar', length: 50, unique: true })\r\n  shortCode: string;\r\n\r\n  @Column({ type: 'varchar', length: 50, nullable: true })\r\n  customAlias: string | null;\r\n\r\n  @Column({ type: 'varchar', length: 255, nullable: true })\r\n  title: string | null;\r\n\r\n  @Column({ type: 'varchar', length: 100, nullable: true })\r\n  userId: string | null;\r\n\r\n  @Column({ type: 'int', default: 0 })\r\n  clickCount: number;\r\n\r\n  @Column({ type: 'timestamp with time zone', nullable: true })\r\n  expiresAt: Date | null;\r\n\r\n  @Column({ type: 'boolean', default: true })\r\n  isActive: boolean;\r\n\r\n  @Column({ type: 'varchar', length: 60, nullable: true })\r\n  password: string | null;\r\n\r\n  @Column({ type: 'int', default: 0 })\r\n  maxClicks: number | null;\r\n\r\n  // Relation to click tracking\r\n  @OneToMany(() => Click, (click) => click.url, {\r\n    cascade: false,\r\n  })\r\n  clicks: Click[];\r\n\r\n  get shortUrl(): string {\r\n    return `${process.env.BASE_URL}/${this.shortCode}`;\r\n  }\r\n}\r\n"],"version":3}